<template>
    <div class="flex h-auto bg-gray-100">
      <div class="flex-1 z-10 ml-72 mt-24 transition-all duration-300">
        <h1 class="text-2xl font-bold">
          <!-- {{ divisionName }} -->
        </h1>
          <h5 class="text-slate-400 mt-1">
            Silahkan cek capaian target Objective Key Results tim disini 
          </h5>
          <div class="flex flex-row pr-9 justify-between mx-0 mt-4 rounded-lg gap-6">
            <div class="bg-white rounded-md w-full h-auto pl-4 pr-4">
              <p class="text-xl text-center font-bold py-5">Key Results</p>
                <div class="flex flex-row justify-center gap-2">
                  <div class="flex flex-col font-display"> 
                    <div class="grid grid-cols-4 gap-4">
                      <div id="grid-key-result">29</div>
                      <div id="grid-key-result">61</div>
                      <div id="grid-key-result">45</div>
                      <div id="grid-key-result">78</div>
                      <div>
                        <div class="flex flex-col mt-1">
                          <div class="px-7">
                            <svg width="34" height="34" viewBox="0 0 28 27" fill="none" xmlns="http://www.w3.org/2000/svg">
                              <path d="M14.8079 6.72746C12.6765 7.38206 10.7829 8.64552 9.36015 10.3624C8.29248 10.2613 7.28231 9.83202 6.46842 9.13359C5.65453 8.43515 5.07686 7.5018 4.81477 6.46178C4.55268 5.42176 4.61904 4.32609 5.00472 3.32531C5.3904 2.32452 6.07648 1.46773 6.96871 0.87263C7.86093 0.277534 8.91553 -0.0266624 9.9876 0.00183391C11.0597 0.0303303 12.0966 0.390121 12.956 1.03178C13.8153 1.67343 14.4549 2.56546 14.7869 3.58533C15.1189 4.60519 15.127 5.70283 14.81 6.72746M3.61538 12.4603H7.97692C7.17938 14.0181 6.73077 15.7836 6.73077 17.653C6.72703 20.2651 7.62168 22.7989 9.26462 24.8294C3.72754 24.1751 0.5 20.2079 0.5 16.6145V16.0952C0.5 14.4439 1.89569 12.4603 3.61538 12.4603ZM27.5 17.653C27.5 18.8805 27.2583 20.0959 26.7886 21.23C26.3189 22.364 25.6304 23.3944 24.7626 24.2623C23.8947 25.1303 22.8644 25.8188 21.7305 26.2885C20.5965 26.7582 19.3812 27 18.1538 27C16.9265 27 15.7112 26.7582 14.5772 26.2885C13.4433 25.8188 12.413 25.1303 11.5451 24.2623C10.6772 23.3944 9.98881 22.364 9.51913 21.23C9.04944 20.0959 8.80769 18.8805 8.80769 17.653C8.80769 15.1741 9.79237 12.7966 11.5451 11.0437C13.2979 9.29083 15.6751 8.30606 18.1538 8.30606C20.6326 8.30606 23.0098 9.29083 24.7626 11.0437C26.5153 12.7966 27.5 15.1741 27.5 17.653ZM23.0429 13.8021C22.9465 13.7054 22.8319 13.6286 22.7057 13.5763C22.5795 13.5239 22.4443 13.497 22.3077 13.497C22.1711 13.497 22.0358 13.5239 21.9097 13.5763C21.7835 13.6286 21.6689 13.7054 21.5725 13.8021L16.0769 19.3002L14.7352 17.9563C14.6387 17.8597 14.5241 17.7831 14.3979 17.7309C14.2718 17.6786 14.1365 17.6517 14 17.6517C13.8635 17.6517 13.7282 17.6786 13.6021 17.7309C13.4759 17.7831 13.3613 17.8597 13.2648 17.9563C13.1682 18.0528 13.0916 18.1675 13.0394 18.2936C12.9871 18.4198 12.9602 18.555 12.9602 18.6916C12.9602 18.8281 12.9871 18.9634 13.0394 19.0895C13.0916 19.2157 13.1682 19.3303 13.2648 19.4269L15.3417 21.504C15.4382 21.6007 15.5528 21.6774 15.6789 21.7298C15.8051 21.7821 15.9403 21.8091 16.0769 21.8091C16.2135 21.8091 16.3488 21.7821 16.4749 21.7298C16.6011 21.6774 16.7157 21.6007 16.8122 21.504L23.0429 15.2727C23.1396 15.1762 23.2164 15.0616 23.2687 14.9354C23.3211 14.8092 23.348 14.674 23.348 14.5374C23.348 14.4008 23.3211 14.2655 23.2687 14.1393C23.2164 14.0132 23.1396 13.8986 23.0429 13.8021Z" fill="#191F2F"/>
                            </svg>
                          </div>
                          <p class="text-center mt-2 text-[15px] font-semibold">Kehadiran</p>
                        </div>
                    </div>
                    <div>
                      <div class="flex flex-col mt-[6px]">
                        <div class="px-7">
                          <svg width="33" height="33" viewBox="0 0 28 27" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M0.5 3C0.5 2.20435 0.81607 1.44129 1.37868 0.87868C1.94129 0.31607 2.70435 0 3.5 0H24.5C25.2956 0 26.0587 0.31607 26.6213 0.87868C27.1839 1.44129 27.5 2.20435 27.5 3V24C27.5 24.7956 27.1839 25.5587 26.6213 26.1213C26.0587 26.6839 25.2956 27 24.5 27H3.5C2.70435 27 1.94129 26.6839 1.37868 26.1213C0.81607 25.5587 0.5 24.7956 0.5 24V3ZM16.9085 6.9825C16.379 5.658 14.4815 5.733 14.0555 7.0935L11.4275 15.5025L10.8455 14.337C10.7197 14.0855 10.5263 13.874 10.2871 13.7262C10.0479 13.5784 9.77221 13.5001 9.491 13.5H6.5C6.10218 13.5 5.72064 13.658 5.43934 13.9393C5.15804 14.2206 5 14.6022 5 15C5 15.3978 5.15804 15.7794 5.43934 16.0607C5.72064 16.342 6.10218 16.5 6.5 16.5H8.573L10.391 20.1375C11.0015 21.357 12.7865 21.213 13.193 19.9125L15.674 11.973L17.1035 15.5475C17.333 16.1235 17.891 16.5 18.5105 16.5H21.5C21.8978 16.5 22.2794 16.342 22.5607 16.0607C22.842 15.7794 23 15.3978 23 15C23 14.6022 22.842 14.2206 22.5607 13.9393C22.2794 13.658 21.8978 13.5 21.5 13.5H19.5155L16.9085 6.9825Z" fill="#191F2F"/>
                          </svg>
                        </div>
                        <p class="text-center mt-2 text-[15px] font-semibold">Kualitas</p>
                      </div>
                    </div>
                    <div>
                      <div class="flex flex-col mt-[6px]">
                        <div class="px-7">
                          <svg width="33" height="33" viewBox="0 0 32 31" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <mask id="mask0_170_205" style="mask-type:luminance" maskUnits="userSpaceOnUse" x="0" y="0" width="32" height="31">
                            <path d="M29.5 26.75V4.25C29.5 3.65326 29.2629 3.08097 28.841 2.65901C28.419 2.23705 27.8467 2 27.25 2H4.75C4.15326 2 3.58097 2.23705 3.15901 2.65901C2.73705 3.08097 2.5 3.65326 2.5 4.25V26.75C2.5 27.3467 2.73705 27.919 3.15901 28.341C3.58097 28.7629 4.15326 29 4.75 29H27.25C27.8467 29 28.419 28.7629 28.841 28.341C29.2629 27.919 29.5 27.3467 29.5 26.75Z" fill="white" stroke="white" stroke-width="4" stroke-linejoin="round"/>
                            <path d="M15.9995 8.9873L13.8275 13.4198L8.89404 14.1353L12.4678 17.6288L11.6135 22.4873L15.9995 20.1496L20.3863 22.4873L19.5388 17.6288L23.1058 14.1353L18.2 13.4198L15.9995 8.9873Z" fill="black" stroke="black" stroke-width="2" stroke-linejoin="round"/>
                            </mask>
                            <g mask="url(#mask0_170_205)">
                            <path d="M0.25 1.75C0.25 0.64543 1.14543 -0.25 2.25 -0.25H29.75C30.8546 -0.25 31.75 0.645431 31.75 1.75V29.25C31.75 30.3546 30.8546 31.25 29.75 31.25H2.25C1.14543 31.25 0.25 30.3546 0.25 29.25V1.75Z" fill="#191F2F"/>
                            </g>
                          </svg>
                        </div>
                        <p class="text-center mt-2 text-[15px] font-semibold">Produktivitas</p>
                      </div>
                    </div>
                    <div>
                      <div class="flex flex-col mt-[6px]">
                        <div class="px-7">
                          <svg width="33" height="33" viewBox="0 0 24 27" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M0 27V8.1H5.33333V27H0ZM9.33333 27V0H14.6667V27H9.33333ZM18.6667 27V16.2H24V27H18.6667Z" fill="#191F2F"/>
                          </svg>
                        </div>
                        <p class="text-center mt-2 text-[15px] font-semibold">Performa</p>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="grid grid-rows-1">
                  <div id="grid-key-result-dark" class="font-display ml-2 pb-2">
                    213
                    <span class="flex flex-col">
                      <svg class="mx-6 mt-10" width="34" height="34" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M26 30C28.2091 30 30 28.2091 30 26C30 23.7909 28.2091 22 26 22C23.7909 22 22 23.7909 22 26C22 28.2091 23.7909 30 26 30Z" fill="white"/>
                        <path d="M10 13H12V15H10V13ZM10 18H12V20H10V18ZM10 23H12V25H10V23ZM14 13H22V15H14V13ZM14 18H22V20H14V18ZM14 23H18V25H14V23Z" fill="white"/>
                        <path d="M7 28V7H10V10H22V7H25V18H27V7C27 6.46957 26.7893 5.96086 26.4142 5.58579C26.0391 5.21071 25.5304 5 25 5H22V4C22 3.46957 21.7893 2.96086 21.4142 2.58579C21.0391 2.21071 20.5304 2 20 2H12C11.4696 2 10.9609 2.21071 10.5858 2.58579C10.2107 2.96086 10 3.46957 10 4V5H7C6.46957 5 5.96086 5.21071 5.58579 5.58579C5.21071 5.96086 5 6.46957 5 7V28C5 28.5304 5.21071 29.0391 5.58579 29.4142C5.96086 29.7893 6.46957 30 7 30H18V28H7ZM12 4H20V8H12V4Z" fill="white"/>
                      </svg>
                      <p class="text-center mt-2 text-[15px] font-semibold">Total</p>
                    </span>
                  </div>
                </div>
              </div>
            <div>
          </div>
        </div>
            <div>
              <VCalendar />
            </div>
          </div>
          <div id="dashboard-container" class="bg-white h-auto rounded-3xl shadow-md w-auto mt-8 mr-10 pb-2 mb-2">
            <div class="flex flex-row items-center justify-between">
              <div class="flex flex-col">
                <h1 class="text-2xl font-bold text-[#0C1662] px-5 py-6">
                    Daftar Anggota
                </h1>
                <div class="flex flex-row justify-between">
                    <div class="bg-[#F6F8FF] gap-2 text-sm flex flex-row items-center px-3 mx-4 rounded-md w-[460px] h-[45px]">
                        <p class="font-bold">PIC</p>
                        <!-- <p>{{ picName}}</p>
                        <p>{{ picEmail }}</p> -->
                        <button class="flex flex-row justify-end text-slate-500">
                            <svg width="21" height="20" viewBox="0 0 21 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M7.3 20L6.9 16.8C6.68333 16.7167 6.47933 16.6167 6.288 16.5C6.09667 16.3833 5.909 16.2583 5.725 16.125L2.75 17.375L0 12.625L2.575 10.675C2.55833 10.5583 2.55 10.446 2.55 10.338V9.663C2.55 9.55433 2.55833 9.44167 2.575 9.325L0 7.375L2.75 2.625L5.725 3.875C5.90833 3.74167 6.1 3.61667 6.3 3.5C6.5 3.38333 6.7 3.28333 6.9 3.2L7.3 0H12.8L13.2 3.2C13.4167 3.28333 13.621 3.38333 13.813 3.5C14.005 3.61667 14.1923 3.74167 14.375 3.875L17.35 2.625L20.1 7.375L17.525 9.325C17.5417 9.44167 17.55 9.55433 17.55 9.663V10.337C17.55 10.4457 17.5333 10.5583 17.5 10.675L20.075 12.625L17.325 17.375L14.375 16.125C14.1917 16.2583 14 16.3833 13.8 16.5C13.6 16.6167 13.4 16.7167 13.2 16.8L12.8 20H7.3ZM10.1 13.5C11.0667 13.5 11.8917 13.1583 12.575 12.475C13.2583 11.7917 13.6 10.9667 13.6 10C13.6 9.03333 13.2583 8.20833 12.575 7.525C11.8917 6.84167 11.0667 6.5 10.1 6.5C9.11667 6.5 8.28733 6.84167 7.612 7.525C6.93667 8.20833 6.59933 9.03333 6.6 10C6.6 10.9667 6.93767 11.7917 7.613 12.475C8.28833 13.1583 9.11733 13.5 10.1 13.5Z" fill="#959595"/>
                            </svg>
                            Edit PIC
                        </button>
                    </div>
                    <form>   
                        <div class="relative">
                            <div class="absolute inset-y-0 flex items-center ps-3 pointer-events-none">
                                <svg class="w-5 h-6" viewBox="0 0 17 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M13.8833 15.375L9.42083 10.9125C9.06667 11.1958 8.65937 11.4201 8.19896 11.5854C7.73854 11.7507 7.24861 11.8333 6.72917 11.8333C5.44236 11.8333 4.35342 11.3876 3.46233 10.496C2.57125 9.60444 2.12547 8.5155 2.125 7.22917C2.125 5.94236 2.57078 4.85342 3.46233 3.96233C4.35389 3.07125 5.44283 2.62547 6.72917 2.625C8.01597 2.625 9.10515 3.07078 9.99671 3.96233C10.8883 4.85389 11.3338 5.94283 11.3333 7.22917C11.3333 7.74861 11.2507 8.23854 11.0854 8.69896C10.9201 9.15937 10.6958 9.56667 10.4125 9.92083L14.875 14.3833L13.8833 15.375ZM6.72917 10.4167C7.61458 10.4167 8.36731 10.1069 8.98733 9.48733C9.60736 8.86778 9.91714 8.11506 9.91667 7.22917C9.91667 6.34375 9.60689 5.59126 8.98733 4.97171C8.36778 4.35215 7.61506 4.04214 6.72917 4.04167C5.84375 4.04167 5.09126 4.35168 4.47171 4.97171C3.85215 5.59174 3.54214 6.34422 3.54167 7.22917C3.54167 8.11458 3.85168 8.86731 4.47171 9.48733C5.09174 10.1074 5.84422 10.4171 6.72917 10.4167Z" fill="#95999D"/>
                                </svg>
                            </div>
                            <input type="search" id="default-search" class="block w-[300px] h-[45px] p-2 ps-10 text-[15px] font-medium text-gray-900 border border-gray-300 rounded-lg bg-gray-50" placeholder="Cari Karyawan..." required>
                        </div>
                    </form>
                    <div class="flex flex-row ml-3">
                      <t-dropdown text="Tambah" class="text-[15px] font-semibold">
                        <div class="py-1 rounded-md shadow-xs">
                          <ul>
                            <li v-for="option in options" :key="option" class="block px-4 py-2 text-sm leading-5 text-gray-700 transition duration-150 ease-in-out hover:bg-gray-100 focus:outline-none focus:bg-gray-100">
                              <nuxt-link :to="`/admin/${option}/add`" class="capitalize">{{ option }}</nuxt-link>
                            </li>
                          </ul>
                        </div>
                      </t-dropdown>
                        <nuxt-link to="/admin/add-okr">
                            <BlueButton class="ml-3" :showIcon="true">
                                <template v-slot:message>OKR</template>
                            </BlueButton>
                        </nuxt-link>
                    </div>
                </div>                     
              </div>
            </div>
            <div class="container px-5 py-6 mb-5">
            <div class="flex flex-row">
              <table class="table w-full h-auto font-display">
                <thead>
                  <tr class="border-b-2 text-left text-[#0C1662]">
                    <th>No</th>
                    <th>Nama</th>
                    <th>Divisi</th>
                    <th>Pekerjaan</th>
                    <th>Performa</th>
                    <!-- <th>Kehadiran</th> -->
                    <th>Kualitas</th>
                    <th>Produktivitas</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody class="text-center">
                  <tr class="border-b-2 text-left px-3 hover:bg-slate-50" v-for="team in teams" :key="team.id">
                    <td class="text-left py-3">{{team.id}}</td>
                    <td class="text-left">{{team.nama}}</td>
                    <td>{{team.pekerjaan}}</td>
                    <td>{{team.performa}}%</td>
                    <td>{{team.kehadiran}}%</td>
                    <td>{{team.kualitas}}%</td>
                    <td>{{team.produktivitas}}%</td>
                    <td>
                      <button class="bg-black rounded-md p-2">
                        <svg width="21" height="21" viewBox="0 0 22 21" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <path d="M16.9424 1.7605L19.5674 4.3855L17.5663 6.3875L14.9413 3.7625L16.9424 1.7605ZM7.32788 14H9.95288L16.329 7.62387L13.704 4.99887L7.32788 11.375V14Z" fill="white"/>
                          <path d="M16.9529 16.625H7.46613C7.44338 16.625 7.41976 16.6337 7.39701 16.6337C7.36813 16.6337 7.33926 16.6259 7.30951 16.625H4.70288V4.375H10.694L12.444 2.625H4.70288C3.73776 2.625 2.95288 3.409 2.95288 4.375V16.625C2.95288 17.591 3.73776 18.375 4.70288 18.375H16.9529C17.417 18.375 17.8621 18.1906 18.1903 17.8624C18.5185 17.5342 18.7029 17.0891 18.7029 16.625V9.0405L16.9529 10.7905V16.625Z" fill="white"/>
                        </svg>
                      </button>
                      <button @click="deleteKaryawan(team.nama)" class="bg-[#FFE3E3] rounded-md p-2">
                        <svg width="22" height="21" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <path d="M7.82788 21.5C7.27788 21.5 6.80721 21.3043 6.41588 20.913C6.02455 20.5217 5.82855 20.0507 5.82788 19.5V6.5H4.82788V4.5H9.82788V3.5H15.8279V4.5H20.8279V6.5H19.8279V19.5C19.8279 20.05 19.6322 20.521 19.2409 20.913C18.8495 21.305 18.3785 21.5007 17.8279 21.5H7.82788ZM9.82788 17.5H11.8279V8.5H9.82788V17.5ZM13.8279 17.5H15.8279V8.5H13.8279V17.5Z" fill="#CA3131"/>
                        </svg>
                      </button>
                    </td>
                  </tr>
                </tbody>
              </table>
              </div>
              <div class="mt-4 ml-[50rem]">
                <t-pagination
                  :value="1"
                  :perPage="5"
                  :limit="2"
                  :totalItems="5"
                />
              </div>
            </div>
          </div>
          <!-- <ConfirmDialog v-if="isConfirmDialog">
            <template v-slot:title>Konfirmasi</template>
            <template v-slot:message>Yakin data akan dihapus?</template>
            <template v-slot:buttons>
              <button class="flex flex-row font-semibold text-black bg-[#E3E8FF] rounded-md px-3 py-2 shadow-sm gap-1" @click="deletingKaryawan">Ya</button>
              <button class="flex flex-row font-semibold text-black bg-white border border-black rounded-md px-3 py-2 shadow-sm gap-1" @click="cancelDelete()">Batal</button>
            </template>
          </ConfirmDialog> -->
          </div>
    </div>
</template>
  
<script>
import { FINANCE } from '~/models/keuangan';
import { IT } from '~/models/IT';
import { KREATIF } from '~/models/kreatif';
import { PIC } from '~/models/PIC';
import BlueButton from '~/components/UI/BlueButton.vue'
import VCalendar from '~/components/UI/VCalendar.vue'

export default {
    layout: 'default-sidebar',
    components: { BlueButton, VCalendar },
    data() {
      return {
        options: ['karyawan', 'pic'],
      }
    },
    async asyncData({ params }) {
        let teams = [];
        switch (params.slug) {
            case 'IT':
                teams = IT;
                break;
            case 'keuangan':
                teams = FINANCE;
                break;
            case 'kreatif':
                teams = KREATIF;
                break;
            default:
                throw new Error('Division not found');
        }
        return { teams };
    },
    computed: {
        // divisionName() {
        //     if (this.teams[0]) {
        //         switch (this.teams[0].divisi.toLowerCase()) {
        //             case 'it': 
        //                 return 'Information Technology Division';
        //             case 'keuangan': 
        //                 return 'Finance Division';
        //             case 'kreatif':
        //                 return 'Creative Division';
        //             default:
        //                 return 'Semua Tim';
        //         }
        //     } else {
        //         return 'Unknown';
        //     }
        // },
        // picName() {
        //   const picEntry = PIC.find(pic => pic.departemen === this.$route.params.slug);
        //   return picEntry ? picEntry.nama : 'Not Found';
        // },
        // picEmail() {
        //   const picEntry = PIC.find(pic => pic.departemen === this.$route.params.slug);
        //   return picEntry ? picEntry.email : 'Not Found';
        // },
    },
};
</script>

<style>
#tambahPosisi {
  font-weight: 600;
}

.vc-pane-layout {
  width: 500px;
}

#grid-key-result {
  background-color: #E3E8FF;
  width: 81px;
  height: 77px;
  text-align: center;
  border-radius: 6px;
  font-size: 25px;
  padding-top: 20px;
  font-weight: 700;
}

#grid-key-result-dark {
  background-color: #191F2F;
  width: 81px;
  text-align: center;
  border-radius: 6px;
  color: white;
  font-size: 25px;
  padding-top: 20px;
  font-weight: 700;
}
</style>